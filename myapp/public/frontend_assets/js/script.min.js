!function(e){"use strict";var t,n,o,p="goodpopup",i="js-goodpopup-close",s="goodpopup-close__png",r="goodpopup_visible",u="goodpopup-inner-content_destroyed",l="goodpopup-inner-content-element_withclosebutton",d="goodpopup-inner-content-element_fullwidth",a="goodpopup-inner-content-element_hided",c="goodpopup-inner-content-element_hidedfull",g="goodpopup-inner-content-element_pseudohided",f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAMO9gn88Q369Agi28KgAAAQtJREFUeAGl10FOw1AMRVEnaZLi/S8YoY/0ACMOUt/w1+cOOqlaa9ve51X/3nX2vVX24ftrwb573757FIZfhfhV2MqrbfkUls8TNs7z4MI8//Hgwjw/u10YPufV7cL0WT1RgO+6Thf+8M9CAf5RhQL9+ggFeBTgUYBHgR6FPupzR8OjAI8CPAvyLsC7AM+CvQvza0GBHgV77LB3wd4FexfsXbB/PWDvgr0L9i7Ys2Df/faCxy8vPArwKMCjIH8cKMhXoUCPAj0K9CjYo2CPgj0K9tnjtwI9Cudl74I9Crc8CkWPQu3wKNy17fCzMP402c9CfAr2KcSnAD8K8SnQpxCfgn0K8Sns9inEvwMkUkuut7bS3AAAAABJRU5ErkJggg==",h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAIVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt0UjBAAAACnRSTlMAMO9gn88Q369Agi28KgAAAQtJREFUeAGl10FOw1AMRVEnaZLi/S8YoY/0ACMOUt/w1+cOOqlaa9ve51X/3nX2vVX24ftrwb573757FIZfhfhV2MqrbfkUls8TNs7z4MI8//Hgwjw/u10YPufV7cL0WT1RgO+6Thf+8M9CAf5RhQL9+ggFeBTgUYBHgR6FPupzR8OjAI8CPAvyLsC7AM+CvQvza0GBHgV77LB3wd4FexfsXbB/PWDvgr0L9i7Ys2Df/faCxy8vPArwKMCjIH8cKMhXoUCPAj0K9CjYo2CPgj0K9tnjtwI9Cudl74I9Crc8CkWPQu3wKNy17fCzMP402c9CfAr2KcSnAD8K8SnQpxCfgn0K8Sns9inEvwMkUkuut7bS3AAAAABJRU5ErkJggg==",C=!1,A={},P=[],O=0,v={isSVGSupported:!!("object"==typeof Modernizr&&"boolean"==typeof Modernizr.inlinesvg&&Modernizr.inlinesvg||((o=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(o.firstChild&&o.firstChild.namespaceURI))),whichTransitionEvent:function(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(e in n)if("undefined"!=typeof t.style[e])return n[e];return!1}(),calculateScrollbarWidth:function(){var t,n,o,p;t=e("<div>").css("position","absolute").css("visibility","hidden").css("width","100px").css("msOverflowStyle","scrollbar"),e("body").append(t).promise().done(function(){o=t.outerWidth(),t.css("overflow","scroll"),n=e("<div>").css("width","100%"),t.append(n).promise().done(function(){p=n.innerWidth(),t.remove(),O=o-p})})},throwError:function(e,t,n){function o(e){"undefined"!=typeof console&&"function"==typeof console.error?console.error(e):alert(e)}switch(t){case"NOT_FOUND":return o("Popup template `"+e+"` doesn't exist"),e;case"WRONG_OPTIONS":return o("Wrong options object in method `setOptions` on popup `"+e+"`"),n;default:return p="Problem with popup","undefined"!=typeof console&&"function"==typeof console.trace?console.trace(p):alert(p),e}var p}},I={closeButtonMarkup:function(e){return'<span class="goodpopup-close js-goodpopup-close">'+(v.isSVGSupported?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16" class="goodpopup-close-svg"><path class="goodpopup-close-svg__path" d="m15.8 13.5l-5.4-5.5 5.5-5.4c.2-.2.2-.6 0-.8l-1.6-1.6c-.1-.1-.3-.2-.4-.2-.2 0-.3.1-.4.2l-5.5 5.4-5.5-5.4c-.1-.1-.2-.2-.4-.2s-.3.1-.4.2l-1.5 1.5c-.2.2-.2.6 0 .8l5.4 5.5-5.5 5.5c0 .1-.1.2-.1.4 0 .2.1.3.2.4l1.6 1.6c.1.1.2.1.4.1.1 0 .3-.1.4-.2l5.4-5.4 5.4 5.5c.1.1.3.2.4.2.1 0 .3-.1.4-.2l1.6-1.6c.1-.1.2-.3.2-.4 0-.2-.1-.3-.2-.4"></path></svg>':'<img src="'+(e?h:f)+'" alt="" class="'+s+'"/>')+"</span>"},createPopupDOM:function(){return e('<div class="goodpopup js-goodpopup"><div class="goodpopup-inner"><div class="goodpopup-inner-content js-goodpopup-inner-content"></div></div></div>').appendTo("body").promise().done(function(){t=e(".js-goodpopup"),n=t.find(".js-goodpopup-inner-content")})},renderPopupContentDOM:function(t,n,o,p,i){var s=e('<div class="goodpopup-inner-content-element '+(p?l:"")+" "+(i?d:"")+'" data-popup-id="'+t+'"></div>');return s.append(I.renderPopupContentTemplateDOM(n,o)).append(p?I.closeButtonMarkup(i):""),s},renderPopupContentTemplateDOM:function(e,t){return e.filter("script[type='text/x-handlebars-template']").length>0?Handlebars.compile(e.html())("object"!=typeof t?{}:t):e.clone().removeAttr("id").attr("data-id",e.attr("id"))}},w={handleKeydown:function(e){for(var t=this.getOptions().keyCodeForClosing,n=0;n<t.length;n++)if(e.keyCode===t[n]){m.close.call(this,this.getOptions().forceClosing.keydown);break}return this},handleOuterClick:function(t){var n=e(t.target);return this.getOptions().isOuterClickClosing&&0===n.parents(".js-goodpopup-inner-content").length&&!n.hasClass(i)&&m.close.call(this,this.getOptions().forceClosing.click),this}},m={open:function(){var t=this;if(C)if(t.isRendered()){if(!t.isHidden())return t;e.each(A,function(e,n){if(n.instance.isRendered()&&!n.instance.isHidden())return m._hide.call(n.instance,function(){t.getOptions().callbackBeforeOpen.call(t),m._show.call(t)}),!1})}else e.each(A,function(e,n){if(n.instance.isRendered()&&!n.instance.isHidden())return m._hide.call(n.instance,function(){t.getOptions().callbackBeforeOpen.call(t),m._renderContent.call(t)}),!1});else t.getOptions().callbackBeforeOpen.call(t),m._renderContent.call(t);return t},close:function(e){var t=this;if(!C||!t.isRendered())return t;var n=e||!1;if(P.length>0)if(n){for(var o=P.length;o>0;o--)m._destroyContent.call(P[o-1].instance,!1);m._destroyContent.call(t,!0)}else m._destroyContent.call(t,!1,function(){P[P.length-1].instance.getOptions().callbackBeforeOpen.call(P[P.length-1].instance),m._show.call(P[P.length-1].instance)});else m._destroyContent.call(t,!0);return t},_renderContent:function(){var o=this;if(o.isRendered()&&!o.getOptions().isIframe&&!o.getOptions().isPrerendered)return o;var s=function(){if(A[o.getPopupId()].$popupClose=A[o.getPopupId()].$popupContent.find("."+i),A[o.getPopupId()].$popupClose.on("click."+p,function(){m.close.call(o,o.getOptions().forceClosing.button)}),e(document).off("keydown."+p).on("keydown."+p,function(e){w.handleKeydown.call(o,e)}),t.off("click."+p).on("click."+p,function(e){w.handleOuterClick.call(o,e)}),C)v.whichTransitionEvent&&A[o.getPopupId()].$popupContent.off(v.whichTransitionEvent+".plugin_suffix").on(v.whichTransitionEvent+".plugin_suffix",function(e){e.target===A[o.getPopupId()].$popupContent[0]&&(A[o.getPopupId()].$popupContent.off(v.whichTransitionEvent+".plugin_suffix"),o.getOptions().callbackAfterOpen.call(o))}),setTimeout(function(){A[o.getPopupId()].$popupContent.removeClass(g)},1),v.whichTransitionEvent||o.getOptions().callbackAfterOpen.call(o),A[o.getPopupId()].isRendered=!0,A[o.getPopupId()].isHidden=!1,C=!0;else{var n=e("body").width();e("html").addClass("noscroll"),e("body").width()>n&&e("html").addClass("noscroll-margin").css("margin-right",parseFloat(e("html").css("margin-right"))+O+"px"),v.whichTransitionEvent&&t.off(v.whichTransitionEvent+".plugin_suffix").on(v.whichTransitionEvent+".plugin_suffix",function(e){e.target===t[0]&&(t.off(v.whichTransitionEvent+".plugin_suffix"),o.getOptions().callbackAfterOpen.call(o))}),t.addClass(r),v.whichTransitionEvent||o.getOptions().callbackAfterOpen.call(o),A[o.getPopupId()].isRendered=!0,A[o.getPopupId()].isHidden=!1,C=!0}};return o.getOptions().isPrerendered||(o.getOptions().isDetachable||o.getOptions().isIframe?0===A[o.getPopupId()].$popupContent.length&&(A[o.getPopupId()].$popupContent=e(I.renderPopupContentDOM(o.getPopupId(),o.getTemplate(),o.getOptions().data,o.getOptions().hasCloseButton,o.getOptions().isFullWidth))):A[o.getPopupId()].$popupContent=e(I.renderPopupContentDOM(o.getPopupId(),o.getTemplate(),o.getOptions().data,o.getOptions().hasCloseButton,o.getOptions().isFullWidth))),C&&A[o.getPopupId()].$popupContent.addClass(g),!o.getOptions().isPrerendered&&!o.getOptions().isIframe||o.getOptions().isIframe&&!o.isRendered()?n.append(A[o.getPopupId()].$popupContent).promise().done(function(){s()}):(o.getOptions().isPrerendered&&o.setOptions({isPrerendered:!1}),A[o.getPopupId()].$popupContent.removeClass(a+" "+c),s()),o},_rerenderContent:function(t){var n=this,o=A[n.getPopupId()].$popupContent;return A[n.getPopupId()].$popupClose.off("click."+p),A[n.getPopupId()].$popupContent=e(I.renderPopupContentDOM(n.getPopupId(),n.getTemplate(),n.getOptions().data,n.getOptions().hasCloseButton,n.getOptions().isFullWidth)),A[n.getPopupId()].$popupContent.addClass(a+" "+c),o.after(A[n.getPopupId()].$popupContent).promise().done(function(){o.remove(),A[n.getPopupId()].$popupClose=A[n.getPopupId()].$popupContent.find("."+i),"function"==typeof t&&t()}),n},_destroyContent:function(n,o){var i,s=this;if(!s.isRendered())return s;s.getOptions().callbackBeforeClose.call(s);for(var l=0;l<P.length;l++)if(P[l].instance===s){P.splice(l,1);break}return void 0!==n&&n?(i=function(){s.getOptions().isIframe?A[s.getPopupId()].$popupContent.addClass(a+" "+c).removeClass(u):s.getOptions().isDetachable?A[s.getPopupId()].$popupContent.detach().removeClass(a+" "+c+" "+g+" "+u):(A[s.getPopupId()].$popupContent.remove(),A[s.getPopupId()].$popupContent=e()),s.getOptions().callbackAfterClose.call(s)},t.off("click."+p),e(document).off("keydown."+p),A[s.getPopupId()].$popupClose.off("click."+p),v.whichTransitionEvent&&t.off(v.whichTransitionEvent+".plugin_suffix").on(v.whichTransitionEvent+".plugin_suffix",function(e){e.target===t[0]&&(t.off(v.whichTransitionEvent+".plugin_suffix"),i())}),t.removeClass(r),v.whichTransitionEvent||i(),e("html").removeClass("noscroll"),e("html").hasClass("noscroll-margin")&&e("html").css("margin-right",parseFloat(e("html").css("margin-right"))-O+"px").removeClass("noscroll-margin"),C=!1,A[s.getPopupId()].isHidden=!1,s.getOptions().isIframe||(A[s.getPopupId()].isRendered=!1)):(i=function(){s.getOptions().isIframe?A[s.getPopupId()].$popupContent.addClass(a+" "+c).removeClass(u):s.getOptions().isDetachable?A[s.getPopupId()].$popupContent.detach().removeClass(a+" "+c+" "+g+" "+u):(A[s.getPopupId()].$popupContent.remove(),A[s.getPopupId()].$popupContent=e()),s.getOptions().callbackAfterClose.call(s),"function"==typeof o&&o()},A[s.getPopupId()].$popupClose.off("click."+p),A[s.getPopupId()].isHidden?(A[s.getPopupId()].isHidden=!1,s.getOptions().isIframe||(A[s.getPopupId()].isRendered=!1),i()):(v.whichTransitionEvent&&A[s.getPopupId()].$popupContent.off(v.whichTransitionEvent+".plugin_suffix").on(v.whichTransitionEvent+".plugin_suffix",function(e){e.target===A[s.getPopupId()].$popupContent[0]&&(A[s.getPopupId()].$popupContent.off(v.whichTransitionEvent+".plugin_suffix"),i())}),A[s.getPopupId()].$popupContent.addClass(u),v.whichTransitionEvent||i(),A[s.getPopupId()].isHidden=!1,s.getOptions().isIframe||(A[s.getPopupId()].isRendered=!1))),s},_show:function(){var n=this;if(!n.isHidden())return n;for(var o=0;o<P.length;o++)if(P[o].instance===n){P.splice(o,1);break}function i(){var o=function(){e(document).off("keydown."+p).on("keydown."+p,function(e){w.handleKeydown.call(n,e)}),t.off("click."+p).on("click."+p,function(e){w.handleOuterClick.call(n,e)}),A[n.getPopupId()].$popupClose.off("click."+p).on("click."+p,function(){m.close.call(n,n.getOptions().forceClosing.button)}),n.getOptions().callbackAfterOpen.call(n)};v.whichTransitionEvent&&A[n.getPopupId()].$popupContent.off(v.whichTransitionEvent+".plugin_suffix").on(v.whichTransitionEvent+".plugin_suffix",function(e){e.target===A[n.getPopupId()].$popupContent[0]&&(A[n.getPopupId()].$popupContent.off(v.whichTransitionEvent+".plugin_suffix"),o())}),setTimeout(function(){A[n.getPopupId()].$popupContent.removeClass(c+" "+a)},1),v.whichTransitionEvent||o(),A[n.getPopupId()].isHidden=!1}return n.getOptions().isDetachable||n.getOptions().isIframe?i():m._rerenderContent.call(n,function(){i()}),n},_hide:function(n){var o=this;if(o.isHidden())return o;function i(){A[o.getPopupId()].$popupContent.addClass(c),o.getOptions().callbackAfterClose.call(o),"function"==typeof n&&n()}return o.getOptions().callbackBeforeClose.call(o),e(document).off("keydown."+p),t.off("click."+p),A[o.getPopupId()].$popupClose.off("click."+p),v.whichTransitionEvent&&A[o.getPopupId()].$popupContent.off(v.whichTransitionEvent+".plugin_suffix").on(v.whichTransitionEvent+".plugin_suffix",function(e){e.target===A[o.getPopupId()].$popupContent[0]&&(A[o.getPopupId()].$popupContent.off(v.whichTransitionEvent+".plugin_suffix"),i())}),A[o.getPopupId()].$popupContent.addClass(a),v.whichTransitionEvent||i(),P.push(A[o.getPopupId()]),A[o.getPopupId()].isHidden=!0,o}},k=function(t,o){var r=this,u=t.attr("id"),g=o;return this.getOptions=function(){return g},this.getPopupId=function(){return u},this.getPopupContent=function(){return A[r.getPopupId()].$popupContent},this.getTemplate=function(){return t},this.isRendered=function(){return A[r.getPopupId()].isRendered},this.isHidden=function(){return A[r.getPopupId()].isHidden},this.setOptions=function(t){return e.isPlainObject(t)?t.hasOwnProperty("forceClosing")&&!e.isPlainObject(t.forceClosing)?v.throwError(u,"WRONG_OPTIONS",t):(t.hasOwnProperty("hasCloseButton")&&t.hasCloseButton!==r.getOptions().hasCloseButton&&r.getPopupContent()&&(t.hasCloseButton?(A[r.getPopupId()].$popupContent.addClass(l).append(I.closeButtonMarkup(r.getOptions().isFullWidth)),A[r.getPopupId()].$popupClose=A[r.getPopupId()].$popupContent.find("."+i),A[r.getPopupId()].$popupClose.off("click."+p).on("click."+p,function(){m.close.call(r,r.getOptions().forceClosing.button)})):(A[r.getPopupId()].$popupClose&&0!==A[r.getPopupId()].$popupClose.length||(A[r.getPopupId()].$popupClose=A[r.getPopupId()].$popupContent.find("."+i)),A[r.getPopupId()].$popupClose.remove(),A[r.getPopupId()].$popupContent.removeClass(l))),t.hasOwnProperty("isFullWidth")&&t.isFullWidth!==r.getOptions().isFullWidth&&r.getPopupContent()&&(t.isFullWidth?(A[r.getPopupId()].$popupContent.addClass(d),A[r.getPopupId()].$popupContent.find("."+s).attr("src",h)):(A[r.getPopupId()].$popupContent.removeClass(d),A[r.getPopupId()].$popupContent.find("."+s).attr("src",f))),t.hasOwnProperty("key_for_closing")&&t.keyCodeForClosing!==r.getOptions().keyCodeForClosing&&"number"==typeof t.keyCodeForClosing&&(t.keyCodeForClosing=[t.keyCodeForClosing]),g=e.extend({},g,t),r):v.throwError(u,"WRONG_OPTIONS",t)},this.open=function(){return m.open.call(this)},this.close=function(e){return m.close.call(this,e)},r.getOptions().isPrerendered&&(A[r.getPopupId()].$popupContent=e(I.renderPopupContentDOM(r.getPopupId(),r.getTemplate(),r.getOptions().data,r.getOptions().hasCloseButton,r.getOptions().isFullWidth)),A[r.getPopupId()].$popupClose=A[r.getPopupId()].$popupContent.find("."+i),A[r.getPopupId()].$popupContent.addClass(a+" "+c),n.append(A[r.getPopupId()].$popupContent),A[r.getPopupId()].isRendered=!0,A[r.getPopupId()].isHidden=!0),r.getTemplate().data("goodpopup",r),r};e.goodpopup={getPopup:function(t){if("undefined"!=typeof A[t]&&"undefined"!=typeof A[t].instance)return A[t].instance;if(void 0!==t){var n=e("#"+t);return 0===n.length?v.throwError(t,"NOT_FOUND"):(n.goodpopup(),A[t].instance)}return!1},getPopups:function(){return A},getFactory:function(){return k},version:"2.0.0-beta.18"},e.fn.goodpopup=function(t){return this.each(function(n,o){var p=e(o),i=p.attr("id"),s="undefined"!=typeof A[i]&&"undefined"!=typeof A[i].instance?A[i].instance:undefined;void 0===s?(A[i]={instance:undefined,isRendered:!1,isHidden:!1,$popupClose:e(),$popupContent:e()},A[i].instance=new k(p,e.extend({},{callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},isPrerendered:!1,isIframe:!1,isDetachable:!1,isOuterClickClosing:!0,isFullWidth:!1,hasCloseButton:!0,keyCodeForClosing:[27],forceClosing:{click:!0,keydown:!0,button:!1},data:{}},t,p.data()))):s.setOptions.call(s,t)})};e(function(){v.calculateScrollbarWidth(),I.createPopupDOM().done(function(){e("script[type='text/x-handlebars-template']").goodpopup()})})}(jQuery);
//# sourceMappingURL=script.min.js.map