<% include template/head %>
  <script src="../global_assets/js/plugins/tables/datatables/datatables.min.js"></script>
  <script src="../global_assets/js/plugins/tables/datatables/extensions/responsive.min.js"></script>
  <script src="../global_assets/js/plugins/forms/selects/select2.min.js"></script>

  <script src="../assets/js/app.js"></script>
  <script src="../global_assets/js/demo_pages/datatables_responsive.js"></script>
<% include template/subheader %>
<!-- Page header -->
  <div class="page-header page-header-light">
    <div class="page-header-content header-elements-md-inline">
      <div class="page-title d-flex">
        <h4> <span class="font-weight-semibold">Admin</span> - All Locations</h4>
        <a href="#" class="header-elements-toggle text-default d-md-none"><i class="icon-more"></i></a>
      </div>

      <div class="header-elements d-none">
      </div>
    </div>

    <div class="breadcrumb-line breadcrumb-line-light header-elements-md-inline">
      <div class="d-flex">
        <div class="breadcrumb">
          <a href="home" class="breadcrumb-item"><i class="icon-home2 mr-2"></i> Home</a>
          <span class="breadcrumb-item active"><i class="icon-office mr-2"></i>All Location</span>
        </div>
      </div>
    </div>
  </div>
<!-- /page header -->
<!-- Content area -->
  <div class="content">
    <% include template/flashmessage %>
    <div class="card">
          <table class="table datatable-responsive">
            <thead>
              <tr>
                <th>Sr. No</th>
                <th>Business Name</th>
                <th>Contact Number</th>
                <th>Email</th>
                <th>Business Owner</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% 
                var i=1;
                if (properties) {
                      properties.forEach((property) => { %>
              <tr>
                <td><%= i++ %></td>
                <td><%= property.property_name%></td>
                <td><%= property.user.contact_number%></td>
                <td><%= property.user.mail%></td>
                <td><%= property.user.first_name+' '+property.user.last_name%></td>
                <td>
                  <% if(property.status==0) { %>
                    <span class="badge badge-info">Pending</span>
                    <% } else if(property.status==1){ %>
                    <span class="badge badge-success">Active</span>
                    <% } else if(property.status==2) { %>
                    <span class="badge badge-danger">Deactive</span>
                    <% } %>
                </td>
                <td> 
                    <div class="list-icons">
                      <a href="/admin/location-detail?id=<%=property.id%>" class="list-icons-item text-primary-600" data-popup="tooltip" title="View" data-container="body">
                        <i class="icon-eye8"></i>
                      </a>

                    <% if(property.status==0) { %>

                    <a href="javascript:void(0)" class="list-icons-item text-success-600" data-popup="tooltip" title="Approve Location" data-container="body" onclick="confirmmessage('Are you sure you want to approve this location?','/admin/businessuser/approve?id=<%=property.id%>')">
                      <i class="icon-user-check"></i>
                    </a>
                         <% }else if(property.status==1) { %>

                      <a href="javascript:void(0)" class="list-icons-item text-danger-600" data-popup="tooltip" title="Suspend User" data-container="body" onclick="confirmmessage('Are you sure you want to suspend this user? ','/admin/businessuser/suspend?id=<%=property.id%>')">
                      <i class="icon-user-block"></i>
                    </a>

                         <% }else if(property.status==2) { %>
                      
                      <a href="javascript:void(0)" class="list-icons-item text-success-600" data-popup="tooltip" title="Activate User" data-container="body" onclick="confirmmessage('Are you sure you want to activate this user? ','/admin/businessuser/activate?id=<%=property.id%>')">
                      <i class="icon-user-check"></i>
                    </a>
                    <% } %>
                    </div>
                  </td>
              </tr>
              <% }) } %>
            </tbody>
          </table>
    </div>
  </div>
  <!-- /content area -->
<% include template/subfooter%>   
  <script type="text/javascript">
      $(document).ready(function(){      
        $("#category_filter").change(function(){       
          $("#location_filters").submit();
        });
      });
      function approveProperty(id){
        confirmmessage('Are you sure you want to approve this location?','/admin/approve-location/?id='+id);
      }

      function rejectProperty(id){
        confirmmessage('Are you sure you want to deactivate this location?','/admin/reject-location/?id='+id);
      }

      function activateProperty(id){
        confirmmessage('Are you sure you want to activate this location?','/admin/approve-location/?id='+id);
      }
  </script>
<% include template/footer%>
      
